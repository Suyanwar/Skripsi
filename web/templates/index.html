<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="{{ url_for('static',filename='styles/bootstrap.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static',filename='styles/style.css') }}" type= "text/css">
  <title>PROFIL LULUSAN GENERATOR</title>
</head>
<body>
  <div class="container">
    <h2 class="text-center">PROFIL LULUSAN GENERATOR</h2>
    <h4 class="text-center">Pilih Jenjang</h4>
    <div class="d-flex justify-content-between" style="height: 60px;"  id="jenjang">
      <div class="p-2 custom-checkbox" id="jenjang1">
        <input type="radio" name="jenjang" value="1"/>
        <span class="box">SMP</span>
      </div>

      <div class="p-2 custom-checkbox" id="jenjang2">
        <input type="radio" name="jenjang" value="2"/>
        <span class="box">SMA</span>
      </div>

      <div class="p-2 custom-checkbox" id="jenjang3">
        <input type="radio" name="jenjang" value="3"/>
        <span class="box">Diploma I</span>
      </div>

      <div class="p-2 custom-checkbox" id="jenjang4">
        <input type="radio" name="jenjang" value="4"/>
        <span class="box">Diploma II</span>
      </div>

      <div class="p-2 custom-checkbox" id="jenjang5">
        <input type="radio" name="jenjang" value="5"/>
        <span class="box">Diploma III</span>
      </div>

      <div class="p-2 custom-checkbox" id="jenjang6">
        <input type="radio" name="jenjang" value="6"/>
        <span class="box">Strata-1</span>
      </div>

      <div class="p-2 custom-checkbox" id="jenjang7">
        <input type="radio" name="jenjang" value="7"/>
        <span class="box">Profesional</span>
      </div>

      <div class="p-2 custom-checkbox" id="jenjang8">
        <input type="radio" name="jenjang" value="8"/>
        <span class="box">Strata-2</span>
      </div>

      <div class="p-2 custom-checkbox" id="jenjang9">
        <input type="radio" name="jenjang" value="9"/>
        <span class="box">Strata-3</span>
      </div>
    </div>

    <br/><br/><br/>

    <h4 class="text-center">Pilih Domain</h4>
    <div class="d-flex justify-content-between flex-wrap" id="domain">
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="1">
        <span class="box">DATA MANAGEMENT SYSTEM</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="2">
        <span class="box">PROGRAMMING AND SOFTWARE DEVELOPMENT</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="3">
        <span class="box">HARDWARE AND DIGITAL PERIPHERALS</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="4">
        <span class="box">NETWORK AND INFRASTRUCTURE</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="5">
        <span class="box">OPERATION AND SYSTEM TOOLS</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="6">
        <span class="box">INFORMATION SYSTEM AND TECHNOLOGY DEVELOPMENT</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="7">
        <span class="box">IT GOVERNANCE AND MANAGEMENT</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="8">
        <span class="box">IT PROJECT MANAGEMENT</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="9">
        <span class="box">IT ENTERPRISE ARCHITECTURE</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="10">
        <span class="box">IT SECURITY AND COMPLIANCE</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="11">
        <span class="box">IT SERVICES MANAGEMENT SYSTEM</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="12">
        <span class="box">IT AND COMPUTING FACILITIES MANAGEMENT</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="13">
        <span class="box">IT MULTEMEDIA</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="14">
        <span class="box">IT MOBILITY AND INTERNET OF THINGS</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="15">
        <span class="box">INTEGRATION APPLICATION SYSTEM</span>
      </div>
      <div class="p-2 custom-checkbox">
        <input type="checkbox" name="domain" value="16">
        <span class="box">IT CONSULTANCY AND ADVISORY</span>
      </div>
    </div>

    <br/><br/><br/>

    <h4 class="text-center">Pilih Okupasi</h4>
    <div class="d-flex justify-content-between flex-wrap" id="okupasi">

    </div>

  </div>
      <button type="button" class="btn btn-primary" style="margin-top: 30px;" id="list-ok">List Okupasi</button>
      <button type="button" class="btn btn-primary" style="margin-top: 30px;" id="cekPL">List Info</button>
    </div>
    <br/><br/><br/>
    <h4 class="text-center">Hasil</h4>
    <div class="container">
      <h5 id="hasilJenjang">Jenjang: </h5>
      <h5 id="hasilDomain">Domain: </h5>
      <h5 id="hasilOkupasi">Okupasi: </h5>
      <h5>Unit kompetensi: </h5>
      <ol id="hasilUK"></ol>
      <h5>Pengetahuan: </h5>
      <ol id="hasilPengetahuan"></ol>
      <h5>Keterampilan: </h5>
      <ol id="hasilSkill"></ol>
      <h5>Sikap Kerja: </h5>
      <ol id="hasilSikap"></ol>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $("#jenjang, #domain, #okupasi").on('click', '.custom-checkbox', function() {
    // GET THE INPUT
    var activeInput = $(this).children("input");

    if(activeInput.is(':checked')) {
      // DESELECT IF ALREADY CHECKED
      $(activeInput).prop("checked", false);
    } else {
      // SELECT IF NOT CHECKED
      $(activeInput).prop("checked", true);
    }

    // IF RADIO REMOVE SELECTION FROM OTHER OPTIONS
    if(activeInput.is('[type=radio]')){
      var nonActiveInput = $(this).siblings().children("input");
      $(nonActiveInput).prop("checked", false);
    }
  });

  $("#list-ok").click(function(){
    var selected = [], level;
    $("#hasilJenjang").text("Jenjang: ");
    $("#hasilDomain").text("Domain: ");

    $("#jenjang div").each(function(){
      if ($(this).find("input").prop("checked")) {
        level = $(this).find("input").attr('value');
        $("#hasilJenjang").append($(this).find("span").text())
      }
    });


    $("#domain div").each(function(){
      if ($(this).find("input").prop("checked")) {
        selected.push($(this).find("span").text());
        $("#hasilDomain").append($(this).find("span").text() + ", ");
      }
    });

    $.ajax({
      type: 'POST',
      url: '/fetchJob',
      data:{
        'domain': selected,
        'level': level,
        'ajax': true
      },
      success: function(data){
        console.log(data);
        $( "#okupasi" ).html('');
        var hasil = JSON.parse(data);
        for (var i = 0; i < hasil.Okupasi.length; i++) {
          $( "#okupasi" ).append(
            '<div class="p-2 custom-checkbox">' +
            '<input type="checkbox" name="domain" value="' + (i+1) + '">' +
            '<span class="box">' + hasil.Okupasi[i] + '</span>' +
            '</div>' );
        }
      }
    });
  });

  $("#cekPL").click(function(){
    var selected = [], level;
    $("#hasilOkupasi").text("Okupasi: ");

    $("#okupasi div").each(function(){
      if ($(this).find("input").prop("checked")) {
        selected.push($(this).find("span").text());
        $("#hasilOkupasi").append($(this).find("span").text() + ", ");
      }
    });

    $.ajax({
      type: 'POST',
      url: '/fetchCom',
      data:{
        'jobs': selected,
        'ajax': true
      },
      success: function(data){
        $("#hasilUK").html('');
        $("#hasilPengetahuan").html('');
        $("#hasilSkill").html('');
        $("#hasilSikap").html('');

        json = $.parseJSON(data);
        for (i = 0; i < json.Kompetensi.length; i++) {
            $("#hasilUK").append("<li>" + json.Kompetensi[i] + "</li>")
        }

        for (i = 0; i < json.hasKnowledge.length; i++) {
            $("#hasilPengetahuan").append("<li>" + json.hasKnowledge[i] + "</li>")
        }

        for (i = 0; i < json.hasSkill.length; i++) {
            $("#hasilSkill").append("<li>" + json.hasSkill[i] + "</li>")
        }

        for (i = 0; i < json.hasAspect.length; i++) {
            $("#hasilSikap").append("<li>" + json.hasAspect[i] + "</li>")
        }
      }
    });
  });
});
</script>
</html>
